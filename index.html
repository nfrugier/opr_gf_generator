<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Generateur de regles OPR</title>
</head>
<body class="bg-light">
<div class="container">
    <h1 class="">Générateur de règles OPR</h1>
    <div class="row">
        <div class="col">
            <input type="button" class="btn btn-primary"
                   onclick="doRoll()"
                   value="Roll for Rules"
            />
        </div>
    </div>
    <div class="row pt-2" >
        <div>
            <div class="card text-white bg-dark mb-3">
                <div class="card-body">
                    <div class="card-title"><span class="fw-bold text-uppercase">Déploiement</span></div>
                    <div class="card-text" id="deployment"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row pt-2" >
        <div>
            <div class="card text-white bg-dark mb-3">
                <div class="card-body">
                    <div class="card-title fw-bold text-uppercase"><span class="">Mission</span>&nbsp;
                        <span id="missionCode"></span></div>
                    <div class="card-text" id="mission"></div>
                </div>
            </div>
        </div>
    </div>


</div>
<script>

    function getRandomInt(max) {
        return Math.floor(Math.random() * max) ;
    }
    function doRoll() {
        let depDiv = document.getElementById('deployment');
        let missionDiv = document.getElementById('mission');
        let missionCode = document.getElementById('missionCode');

        let deployment = getRandomInt(6);
        let missionStyle = getRandomInt(3);
        let mission = getRandomInt(6);

        const deploymentResult = [
            "No Man's Land",
            "Long Haul",
            "Flank Assault",
            "Frontal Clash",
            "Tactical Push",
            "Meeting Engagement"
        ];

        const missionStyleArray = [
            "Face-Off",
            "Progressive Scoring",
            "Attack & Defend",
        ];

        const missionArray = {
            "Face-Off" : {
                "1":"Duel",
                "2":"Seize Ground",
                "3":"Relic Hunt",
                "4":"Sabotage",
                "5":"Breakthrough",
                "6":"King of the Hill",
            },
            "Progressive Scoring" : {
                "1":"Pitched Battle",
                "2":"Domination",
                "3":"Capture & Hold",
                "4":"Demolition",
                "5":"Headquarters",
                "6":"Mosh Pit",
            },
            "Attack & Defend" : {
                "1":"The Raid",
                "2":"Smash & Grab",
                "3":"Ambush",
                "4":"Last Stand",
                "5":"VIP Escort",
                "6":"The Rescue",
            },
        };

        let missionStyleString = '';
        let missionString = '';

        for (var i in missionArray) {
            if (i === missionStyleArray[missionStyle]) {
                missionStyleString = i;
                missionString = missionArray[i][mission+1];
            }
        }

        depDiv.innerHTML =
            `${deploymentResult[deployment]}`
        ;

        missionDiv.innerHTML =
            `<p>${missionStyleString} : ${missionString}</p>`
        ;
        missionCode.innerHTML = `n°${missionStyle+1}.${mission+1}`;
    }
</script>
</body>
</html>